<!DOCTYPE html>
<html lang="en">
<head>
    <!--
    REQUIREMENTS:
    • An overall introduction to your project, including the topic and tasks. (5 pts)
    • A paragraph to introduce the data, including the size, source and attributes. (5 pts)
    • At least two links to the references. (5 pts)
    • You have at least 5 data data visualizations. At least 1 of the visualization is made with Altair and at
    least 1 of the visualization is made with D3. (5 pts)
    • All data visualizations have clear titles, labels, legends (if need). At least 3 of the figures need to have
    customized settings (color, shape, layout etc.) We also need a paragraph to explain the takeaway of
    the visualization on the webpage, and a paragraph to explain the design idea for the visualization on
    the separated word document. (40 pts)
    • Among the 5 data visualizations, at least 3 different kinds of the interaction should be implemented.
    Interactive functions are well-explained and easy to be used. The interaction functions are meaningful
    and can help people learn more about the data compare to a static plot. The interaction works. (20
    pts)
    • A summary for your findings, including what you have learned from the data visualization and what
    can be done in the future. (10 pts)
    • Format, including correctly publish the website, no grammar error and keep the webpage tidy and
    clear.(10 pts) -->

    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Home</title>
    
    <!-- Vega-Lite libraries for Altair visualization -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <div id="navbar"></div>
    <main>
        <div class="card">
            <section class="intro">
                <h1>Introduction</h1>
                <p>Topic and Tasks</p>
            </section>
        </div>
        <div class="card">
            <section class="data-intro">
                <h2>Introducing the data</h2>
                <p>size, source, attributes, etc.</p>
            </section>
        </div>
        <div class="card">
            <section class="viz-1">
                <h3>Visualization 1</h3>
                <div id="viz1-container" class="visualization-container"></div>
                <p class="viz-description">
                    This visualization shows monthly trip data across different categories. 
                    Use the dropdown menu to switch between Bike Type, Member Type, and Average Duration.
                    The interactive chart allows you to explore patterns in bike usage over time.
                </p>
            </section>
        </div>
        <div class="card">
            <section class="viz-2">
                <h3>Visualization 2</h3>
            </section>
        </div>
        <div class="card">
            <section class="viz-3">
                <h3>Visualization 3</h3>
            </section>
        </div>
        <div class="card">
            <section class="viz-4">
                <h3>Visualization 4</h3>
            </section>
        </div>
        <div class="card">
            <section class="viz-5">
                <h3>Visualization 5</h3>
            </section>
        </div>
        <div class="card">
            <section class="summary">
                <h3>Summary of findings</h3>
            </section>
        </div>
    </main>

    <script>
        // Dynamically load navbar
        fetch('navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
    </script>
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-121b85e27cc4f24a4a30674abf365f47"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "subcategory", "title": "Subcategory", "type": "nominal"}, "tooltip": [{"field": "month", "type": "nominal"}, {"field": "subcategory", "type": "nominal"}, {"field": "count", "type": "quantitative"}], "x": {"field": "month", "title": "Month", "type": "nominal"}, "y": {"field": "count", "title": "Value", "type": "quantitative"}}, "height": 400, "params": [{"name": "CategorySelector", "bind": {"input": "select", "options": ["Bike Type", "Member Type", "Average Duration"], "name": "Y Axis: "}, "value": "Bike Type"}], "title": "Monthly Trip Data", "transform": [{"filter": "(datum.category === CategorySelector)"}], "width": 600, "$schema": "https://vega.github.io/schema/vega-lite/v5.20.1.json", "datasets": {"data-121b85e27cc4f24a4a30674abf365f47": [{"month": "2024-04", "subcategory": "classic_bike", "count": 4587.0, "category": "Bike Type"}, {"month": "2024-04", "subcategory": "electric_bike", "count": 1474.0, "category": "Bike Type"}, {"month": "2024-08", "subcategory": "classic_bike", "count": 2.0, "category": "Bike Type"}, {"month": "2024-09", "subcategory": "classic_bike", "count": 7548.0, "category": "Bike Type"}, {"month": "2024-09", "subcategory": "electric_bike", "count": 1733.0, "category": "Bike Type"}, {"month": "2024-12", "subcategory": "classic_bike", "count": 1771.0, "category": "Bike Type"}, {"month": "2024-12", "subcategory": "electric_bike", "count": 699.0, "category": "Bike Type"}, {"month": "2024-04", "subcategory": "casual", "count": 1494.0, "category": "Member Type"}, {"month": "2024-04", "subcategory": "member", "count": 4567.0, "category": "Member Type"}, {"month": "2024-08", "subcategory": "casual", "count": 1.0, "category": "Member Type"}, {"month": "2024-08", "subcategory": "member", "count": 1.0, "category": "Member Type"}, {"month": "2024-09", "subcategory": "casual", "count": 2765.0, "category": "Member Type"}, {"month": "2024-09", "subcategory": "member", "count": 6516.0, "category": "Member Type"}, {"month": "2024-12", "subcategory": "casual", "count": 459.0, "category": "Member Type"}, {"month": "2024-12", "subcategory": "member", "count": 2011.0, "category": "Member Type"}, {"month": "2024-04", "subcategory": "Average Duration", "count": 11.971965572237803, "category": "Average Duration"}, {"month": "2024-08", "subcategory": "Average Duration", "count": 15.969591666666666, "category": "Average Duration"}, {"month": "2024-09", "subcategory": "Average Duration", "count": 11.986394840714004, "category": "Average Duration"}, {"month": "2024-12", "subcategory": "Average Duration", "count": 11.049911396761134, "category": "Average Duration"}]}};
            
            try {
                vegaEmbed("#viz1-container", spec, {
                    actions: true,
                    theme: "light",
                    renderer: "svg",
                    downloadFileName: "monthly_trip_data",
                    defaultStyle: true,
                    hover: true,
                    padding: { left: 5, top: 5, right: 5, bottom: 40 }
                }).catch(error => {
                    console.error("Error embedding visualization:", error);
                    document.getElementById("viz1-container").innerHTML = 
                        '<p class="error">Error embedding visualization. See console for details.</p>';
                });
            } catch (error) {
                console.error("Vega Embed error:", error);
                document.getElementById("viz1-container").innerHTML = 
                    '<p class="error">Vega Embed error. See console for details.</p>';
            }
        });
    </script>
</body>
</html>
